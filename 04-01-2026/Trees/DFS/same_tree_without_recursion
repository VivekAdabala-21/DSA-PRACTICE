class Solution {
    public boolean isSameTree(TreeNode p, TreeNode q) {
        Queue<TreeNode> queue1 = new LinkedList<>();
        Queue<TreeNode> queue2 = new LinkedList<>();

        queue1.add(p);
        queue2.add(q);

        while (!queue1.isEmpty() && !queue2.isEmpty()) {

            TreeNode a = queue1.poll();
            TreeNode b = queue2.poll();

            // both null → continue
            if (a == null && b == null) continue;

            // one null or value mismatch → not same
            if (a == null || b == null) return false;
            if (a.val != b.val) return false;

            // add children (INCLUDING nulls)
            queue1.add(a.left);
            queue1.add(a.right);

            queue2.add(b.left);
            queue2.add(b.right);
        }

        return queue1.isEmpty() && queue2.isEmpty();
    }
}
